<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
  <!ENTITY RFC2119 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
  <!ENTITY RFC2710 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2710.xml'>
  <!ENTITY RFC2827 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2827.xml'>
  <!ENTITY RFC3315 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3315.xml'>
  <!ENTITY RFC3633 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3633.xml'>
  <!ENTITY RFC3646 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3646.xml'>
  <!ENTITY RFC3736 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3736.xml'>
  <!ENTITY RFC4075 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4075.xml'>
  <!ENTITY RFC4242 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4242.xml'>
  <!ENTITY RFC4291 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4291.xml'>
  <!ENTITY RFC4361 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4361.xml'>
  <!ENTITY RFC4861 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4861.xml'>
  <!ENTITY RFC4862 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4862.xml'>
  <!ENTITY RFC4943 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4943.xml'>
  <!ENTITY RFC5006 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5006.xml'>
  <!ENTITY I-D.ietf-dhc-container-opt SYSTEM 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-dhc-container-opt-05.xml'>
  <!ENTITY I-D.ietf-v6ops-cpe-simple-security SYSTEM 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-v6ops-cpe-simple-security-00.xml'>
  <!ENTITY I-D.ietf-softwire-hs-framework-l2tpv2 SYSTEM 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-softwire-hs-framework-l2tpv2-13.xml'>
  <!ENTITY I-D.ietf-softwire-dual-stack-lite SYSTEM 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-softwire-dual-stack-lite-00.xml'>
]>

<rfc category="info" ipr="full3978" docName="draft-donley-ipv6-cpe-rtr-use-cases-and-reqs">

<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

<?rfc toc="yes" ?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes"?>
<?rfc iprnotified="no" ?>
<?rfc strict="no" ?>

<front>
	<title abbrev="IPv6 CPE Router Use Cases and Reqs">
			   Use Cases and Requirements for an IPv6 CPE Router
	</title>

	<author initials='C.D.' surname="Donley" fullname='Chris Donley'>
		<organization>CableLabs </organization>
		<address>
			<postal>
				<street>858 Coal Creek Circle</street>
				<city>Louisville</city> <region>CO</region> 
				<code>80027</code>
				<country>USA</country>
			</postal>
			<email>c.donley@cablelabs.com</email>
		</address>
	</author>

	<author initials='D.K.' surname="Kharbanda" fullname='Deepak Kharbanda'>
		<organization>CableLabs </organization>
		<address>
			<postal>
				<street>858 Coal Creek Circle</street>
				<city>Louisville</city> <region>CO</region> 
				<code>80027</code>
				<country>USA</country>
			</postal>
			<email>d.kharbanda@cablelabs.com</email>
		</address>
	</author>

	<author initials='J.B.' surname="Brzozowski" fullname='John Jason Brzozowski'>
		<organization>Comcast Cable </organization>
		<address>
			<postal>
				<street>   1360 Goshen Parkway</street>
				<city>West Chester</city> <region>PA</region> 
				<code>19473</code>
				<country>USA</country>
			</postal>
			<email>john_brzozowski@cable.comcast.com</email>
		</address>
	</author>

	<author initials='Y.L.' surname="Lee" fullname='Yiu Lee'>
		<organization>Comcast Cable </organization>
		<address>
			<postal>
				<street>1500 Market St</street>
				<city>Philadelphia</city> <region>PA</region> 
				<code>19102</code>
				<country>USA</country>
			</postal>
			<email>yiu_lee@cable.comcast.com</email>
		</address>
	</author>
	
	<author initials='J.W.' surname="Weil" fullname='Jason Weil'>
		<organization>Cox Communications</organization>
		<address>
			<postal>
				<street>5575 Peachtree Dunwoody Road</street>
				<city>Atlanta</city> <region>GA</region> 
				<code>30342</code>
				<country>USA</country>
			</postal>
			<email>jason.weil@cox.com</email>
		</address>
	</author>
  
	<author initials='K.E.' surname="Erichsen" fullname='Kirk Erichsen'>
		<organization>Time Warner Cable </organization>
		<address>
			<postal>
				<street>12101 Airport Way</street>
				<city>Broomfield</city> <region>CO</region> 
				<code>80021</code>
				<country>USA</country>
			</postal>
			<email>kirk.erichsen@twcable.com</email>
		</address>
	</author>
	
	<author initials='L.H.' surname="Howard" fullname='Lee Howard'>
		<organization>Time Warner Cable </organization>
		<address>
			<postal>
				<street>13241 Woodland Park Rd</street>
				<city>Herndon</city> <region>VA</region> 
				<code>20171</code>
				<country>USA</country>
			</postal>
			<email>william.howard@twcable.com</email>
		</address>
	</author>
	
	<author initials='JF.T.' surname="Tremblay" fullname='Jean-Francois Tremblay'>
		<organization>Videotron </organization>
		<address>
			<postal>
				<street>300 Viger Ave E</street>
				<city>Montreal</city> <region>PQ</region> 
				<code>PQ  H2X 3W4</code>
				<country>CA</country>
			</postal>
			<email>trembjfr@videotron.com</email>
		</address>
	</author>
	

	
	
	<date year="2009"/>
	
  <abstract>
			<t>
        This document captures use cases and associated requirements for an IPv6 Customer Premises Equipment (CPE) router.  Specifically, the current version of this document focuses on the provisioning of an IPv6 CPE router and the provisioning of IPv6 Home Devices attached to it. It also addresses IPv6 traffic forwarding and IPv6 CPE Router security. 
This document also identifies areas for future consideration. These areas include prefix sub-delegation, IPv6 multicast, transition and tunneling mechanisms, provisioning consistency between DHCPv4 and DHCPv6, and DNS support. 
This document does not address IPv4 use cases or requirements, as they are widely understood; however, it is expected that IPv6 CPE Routers will also support IPv4.
			</t>
		</abstract>
</front>

<middle>
<section title="Introduction">
 <t>This document enumerates common use cases and requirements for IPv6 CPE Routers.  These requirements should be applicable to a wide variety of service provider access networks, including DSL, cable, wireless, fiber-based and other services. This document defines the base level of functionality necessary to provide connectivity to the end-user's network. Vendors and other interested parties are encouraged to incorporate additional functionality into the feature set, as deemed necessary or appropriate.</t>
</section>
<section title="Conventions used in this document">
  <t>
  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC-2119 Error! Reference source not found..
  </t>
  <section title="Terminology">
  <t>
    <list style="hanging">
     <t>Customer - An end user that receives Internet service from the Service Provider.</t>
      <t>Customer Network - one or more subnets attached to the CPE Router that connect customer IPv6 Home Devices.</t>
      <t>IPv6 CPE Router - A standalone or embedded IPv6 Internet gateway, intended for home or small office use, that routes IPv6 (and optionally IPv4) traffic from one or more LAN Interfaces to the Internet. </t>
      <t>IPv6 Home Device - a host device such as a personal computer that supports IPv6, is located in the home or small office, and receives IPv6 Internet connectivity through the IPv6 CPE Router</t>
      <t>LAN Interface - a layer 3 network interface on a link in the customer network. A LAN Interface could attach to Ethernet, IEEE 802.11, MoCA 1.0/1.1, and other networks. An IPv6 CPE Router may have one or more layer 3 LAN Interfaces</t>
      <t>Service Provider - A company that offers its customers access to the Internet. In this document, a Service Provider specifically offers Internet access using IPv6, and may also offer IPv4 Internet access.  The Service Provider can provide such access over a variety of different transport methods such as DSL, cable, wireless, and others.</t>
      <t>WAN Interface - the single physical network interface on the standalone CPE Router that is used to connect the router to the access network of the Service Provider.  When the CPE Router is embedded in a bridging device that connects to the WAN (e.g. a cable or DSL modem), the CPE Router WAN interface is a logical network interface.  </t>
    </list>
  </t>
 </section>
</section>
<section title="Architecture and Operations">
  <t>An IPv6 CPE Router is a consumer oriented routing device, typically deployed in a home or small office, for the purpose of forwarding layer 3 traffic to IPv6 Home Devices. The IPv6 CPE Router is commonly used as a single point of attachment to a Service Provider network. This document describes a router which primarily operates as the core of the end-user's network. It may support more than one subnet.</t>
  <t>The CPE Router is provisioned with a Globally-Unique IPv6 Address (GUA) on its WAN interface by the Service Provider.  Service providers may use different provisioning modes such as stateful DHCPv6, PPPoE, and others; this document focuses on stateful DHCPv6 because the use case is well-defined and because some Service Providers are already implementing DHCPv6 provisioning. Also, stateful DHCPv6 is required for prefix delegation. </t>
  <t>When offering stateful DHCPv6, the Service Provider may use multiple DHCPv6 servers to provide redundancy.  In addition to an IA_NA, the CPE Router requests prefix delegation. It also requests configuration information for IPv6 Home Devices through the Container Option for Server Configuration [I-D.ietf-dhc-container-opt" /> or DNS Recursive Name Server, <xref target="RFC3646" />. It is expected that CPE Routers will be provided with at least a /56.</t>
  <t>The CPE Router assigns at least a /64 from its delegated prefix to each LAN interface.  It may optionally also assign a Unique Local Address (ULA) to its LAN Interfaces for communication on the customer network; however, the use of ULAs is beyond the scope of this document.  To support customer privacy, the CPE Router may have more than one LAN interface. For example, the customer may use one subnet for Ethernet traffic and a second subnet for wireless traffic. In such an environment, the customer may find it advantageous to keep Ethernet traffic isolated from wireless traffic.</t>
  <t>IPv6 Home Devices acquire IPv6 addresses either through stateless address autoconfiguration (SLAAC) or stateful DHCPv6.  It is RECOMMENDED that IPv6 Home Devices attached to the customer network use SLAAC to acquire a GUA.  The CPE Router provides configuration information obtained from the Service Provider to the Home Device either through stateless DHCP or the <xref target="RFC5006" /> Recursive DNS Server (RDNSS) option. In some cases, stateful DHCP may optionally be used.  Stateful DHCPv6 may be advantageous to support a CPE Router with a public wireless access point, where a Service Provider needs to maintain a mapping between a customer device and a GUA to support lawful discovery. </t>
  <t>The IPv6 CPE Router is responsible for implementing IPv6 routing; that is, the CPE Router must look up the IPv6 Destination address in its routing table to decide to which interface it should send the packet.</t>
  <t>The CPE Router should use basic ingress and egress traffic filters to filter "martian" or obviously spoofed traffic. It should also allow customer-configurable packet filters.</t>
      <section title="Example Network Topology">
      <figure>
        <preamble>The following figure illustrates how an IPv6 CPE Router may be deployed in a basic customer network. Many of the use cases will refer to this figure.</preamble>
        <artwork>
        
                   +-------+-------+                   \ 
                   |   Service     |                    \ 
                   |   Provider    |                     | ISP                          
                   |    Router     |                     | network
                   +-------+-------+                     |
                           |                             /
                           | Subscriber                 /
                           | Internet connection       /
                           |
                    +------+------+                    \
                    |     IPv6    |                     \
                    |     CPE     |                      \
                    |    Router   |                      /
                    +---+-------+-+                     /
                        |       |                      | Customer
  ---+-------------+----+-    --+--+-------------+---  | network(s)
     |             |               |             |      \ 
+----+-----+ +-----+----+     +----+-----+ +-----+----+  \
|IPv6 Home | |IPv6 Home |     | IPv6 Home| |IPv6 Home |  /
|   Device | |  Device  |     |   Device | | Device   | /
+----------+ +-----+----+     +----------+ +----------+/

        </artwork>
        <postamble>An example of a CPE Router deployment.</postamble>
      </figure>
    </section>
</section>
<section title="Use Cases and Requirements">
  <t>This section presents the use cases and associated requirements for an IPv6 CPE Router.</t>
  <section title="Service Provider IPv6 Provisioning of the CPE Router">
    <section title="Description">
      <t>The IPv6 CPE Router acquires a GUA for its WAN interface, and obtains other configuration parameters, as needed.</t>
      <t>Service Providers may use different provisioning methods depending on the characteristics of the transport method (e.g. cable, DSL, wireless, fiber, etc.) and the Service Provider's provisioning environment. </t>
      <t>It is RECOMMENDED that the CPE Router use DHCPv6 to obtain an IPv6 GUA on its WAN interface. The CPE Router is required to use DHCPv6 to obtain a delegated prefix for the customer network. When DHCPv6 is required, the CPE Router is not expected to acquire connectivity information through stateless address autoconfiguration (SLAAC) or stateless DHCPv6.  </t>
    </section>
    <section title="Requirements">
      <section title="Obtain Link-Local Address">
        <t>The CPE Router follows <xref target="RFC4862" /> to obtain a link-local address, join the all-nodes and solocited-nodes multicast addresses, and perform Duplicate Address Detection (DAD) on all LAN and WAN interfaces. If the CPE Router determines that the constructed link-local address is already in use, the CPE Router SHOULD terminate IPv6 operation on that interface.</t>
      </section>
      <section title="Perform router discovery">
        <t>The CPE Router follows <xref target="RFC4861" /> to perform router discovery on its WAN interface. </t>
      </section>
      <section title="Obtain IPv6 Address and Other Configuration Parameters">
        <t>The CPE Router MUST honor the M and O bits in the RA to assign an IPv6 address to the WAN interface; the prefix advertisement options and associated L bits to identify "on-link" prefixes; and associated A bits to assign a SLAAC address. It is RECOMMENDED that the RA received by the CPE Router have its M bit set to 1. Under this recommendation, the CPE Router uses DHCPv6 as described in <xref target="RFC3315" /> to obtain its IPv6 address for its WAN Interface and other configuration information (and ignore the O bit). The CPE Router MUST use the DHCPv6 <xref target="RFC3633" /> IA_PD option to obtain a delegated prefix for the customer network.</t>
        <t>Because many Internet access topologies for home users require that traffic be sent to the Service Provider's router, if the prefix advertisement has the L bit set to 0, the CPE Router SHOULD identify the prefix as "not-on-link" and forward traffic destined for that prefix to the router.</t>
        <t>The CPE Router SHOULD request values for the following options through DHCP: Client Identifier, IA_NA, IA_PD, Reconfigure Accept, and Options Request Option for the DNS Recursive Name Server, <xref target="RFC3646" /> and the Container Option for Server Configuration <xref target="I-D.ietf-dhc-container-opt" />. The CPE Router MAY also accept and request additional information via DHCP.</t>
        <t>To facilitate DHCP reconfiguration in response to changes in the Service Provider network, the CPE Router SHOULD support the Reconfigure Key Authentication Protocol, as described in <xref target="RFC3315" />.</t>
        <t>In order to protect against malicious traffic, the CPE Router MUST NOT forward any IPv6 traffic between its LAN Interface(s) and its WAN Interface until the router has successfully completed the IPv6 provisioning process. Even if the WAN interface does not have an IPv6 GUA, the CPE Router MAY forward IPv6 traffic between its LAN interfaces. The CPE Router SHOULD forward IPv6 traffic between its LAN interfaces if it has received a delegated prefix.</t>
      </section>
    </section>
  </section>
  <section title="Provisioning Home Networks and Attached IPv6 Home Devices">
    <section title="Description">
      <t>The CPE Router distributes configuration information obtained during WAN interface provisioning to IPv6 Home Devices and assists IPv6 Home Devices in obtaining an IPv6 GUA.</t>
      <t>IPv6 Home Devices can acquire an IPv6 GUA statelessly using SLAAC or statefully using DHCPv6. If SLAAC is used, additional configuration parameters beyond the GUA, such as DNS server address, could be passed to the Home Device using stateless DHCPv6 or RDNSS.</t>
      <t>It is RECOMMENDED that an IPv6 Home Device attached to the customer network acquires an IPv6 GUA using SLAAC and additional information using stateless DHCPv6.</t>
    </section>
    <section title="Requirements">
      <section title="Assigning IPv6 Addresses to CPE Router LAN Interfaces">
        <t>The CPE Router SHOULD minimally assign a unique /64 from its received IA_PD to each of its LAN interfaces.</t>
      </section>
      <section title="Assigning IPv6 Addresses using SLAAC">
        <t>The CPE router acts as a router through each of its LAN interfaces as described in <xref target="RFC4861" />. Unless the CPE Router is otherwise configured by an administrator, the RA SHOULD set:
          <list style="symbols">
            <t>the M bit to 0</t>
            <t>the O bit to 1</t>
            <t>a prefix advertisement for the /64 applied to the LAN interface with the A bit set to 1 and the L bit set to 1</t>
          </list>
        </t>
      </section>
      <section title="IPv6 Provisioning using Stateless DHCPv6">
        <t>On the LAN Interface, the Home Device may request additional provisioning options such as a DNS server address through stateless DHCPv6, as described in <xref target="RFC3315" /> and <xref target="RFC3736" />. </t>
        <t>The CPE Router SHOULD serve as a stateless DHCPv6 server. The CPE Router SHOULD pass the additional set of DHCPv6 options received from the DHCP client on its WAN interface from the Service Provider to IPv6 Home Devices. Information received in a Container Option by the DHCP client overrides other information received by the client. The CPE router need not serve as a DHCPv6 Relay Agent.</t>
      </section>
      <section title="IPv6 Provisioning using RFC 5006">
        <t>IPv6 CPE Router Router Advertisements MAY include the RDNSS option as specified in <xref target="RFC5006" />. In that case, the IPv6 CPE Router MUST set the O bit of the RA message to 0. The IPv6 CPE Router SHOULD include information received in the DHCP Container Option for Server Configuration, if sent by the Service Provider during CPE Router WAN Interface provisioning.</t>
      </section>
    </section>
  </section>
  <section title="IPv6 Traffic Forwarding">
    <section title="Description">
      <t>The IPv6 CPE Router is responsible for implementing IPv6 routing; that is, the CPE Router must look up the IPv6 Destination address in its routing table to decide to which interface it should send the packet. The typical scenario for packets routed to the WAN Interface is that the next-hop router will be the CPE Router's default route, learned via Router Advertisement from the Service Provider router.</t>
    </section>
    <section title="Requirements">
      <t>The CPE Router MUST support the Neighbor Discovery (ND) protocol, as described in <xref target="RFC4861" />, on each of its LAN and WAN interfaces. </t>
      <t>The CPE Router also discovers other devices on the network connected to the WAN interface using ND. Consistent with <xref target="RFC4943" />, unless the L bit in the RA is set to 1, the CPE Router SHOULD assume that such devices are "not-on-link", so traffic for such devices SHOULD be forwarded to the default router. </t>
    </section>
  </section>
  <section title="CPE Router Security">
    <section title="Description">
      <t>It is considered a best practice to filter obviously malicious traffic (e.g. spoofed packets, "martian" addresses, etc.). Thus, the IPv6 CPE Router should support basic stateless egress and ingress filters. The CPE router should also offer mechanisms to filter traffic entering the customer network; however, the method by which vendors implement configurable packet filtering is beyond the scope of this document. </t>
    </section>
    <section title="Requirements">
       <t>The CPE Router SHOULD support <xref target="I-D.ietf-v6ops-cpe-simple-security" />.</t>
        <t>The CPE Router MUST support ingress filtering in accordance with <xref target="RFC2827" /> (BCP 38).</t>
    </section>
  </section>
</section>
<section title="Summary of Requirements">
  <t>
    <list style="hanging">
      <t>GEN-REQ1: The CPE Router SHOULD support the following RFCs:
        <list style="symbols">
 	          <t><xref target="RFC2710" /> Multicast Listener Discovery (MLD) for IPv6</t>
            <t><xref target="RFC3315" /> Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</t>
            <t><xref target="RFC3633" /> IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6</t>
            <t><xref target="RFC3646" /> DNS Configuration options for Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</t>
            <t><xref target="RFC4075" /> Simple Network Time Protocol (SNTP) Configuration Option for DHCPv6.</t>
            <t><xref target="RFC4242" /> Information Refresh Time Option for Dynamic Host Configuration Protocol for IPv6 (DHCPv6).</t>
            <t><xref target="RFC4291" /> IP Version 6 Addressing Architecture</t>
            <t><xref target="RFC4861" /> Neighbor Discovery for IP version 6 (IPv6)</t>
            <t><xref target="RFC4862" /> IPv6 Stateless Address Autoconfiguration</t>
        </list>
      </t>
      <t>CRP-REQ1:	If the CPE Router determines that the constructed link-local address is already in use, the CPE Router SHOULD terminate IPv6 operation on that interface.</t>
      <t>CRP-REQ2:	The CPE Router MUST honorthe M and O bits in the RA to assign an IPv6 address to the WAN interface; the prefix advertisement options and associated L bits to identify "on-link" prefixes; and associated A bits to assign a SLAAC address.</t>
      <t>CRP-REQ3:	The CPE Router MUST use the DHCPv6 <xref target="RFC3633" /> IA_PD option to obtain a delegated prefix for the customer network. </t>
      <t>CRP-REQ4:	The CPE Router SHOULD request values for the following options through DHCP: Client Identifier, IA_NA, IA_PD, Reconfigure Accept, and Options Request Option for the DNS Recursive Name Server, <xref target="RFC3646" /> and the Container Option for Server Configuration <xref target="I-D.ietf-dhc-container-opt" />. </t>
      <t>CRP-REQ5:	The CPE Router MAY also accept and request additional information via DHCP.</t>
      <t>CRP-REQ6: To facilitate DHCP reconfiguration in response to changes in the Service Provider network, the CPE Router SHOULD support the Reconfigure Key Authentication Protocol, as described in <xref target="RFC3315" /></t>
      <t>CRP-REQ7:	In order to protect against malicious traffic, the CPE Router MUST NOT forward any IPv6 traffic between its LAN Interface(s) and its WAN Interface until the router has successfully completed the IPv6 provisioning process. </t>
      <t>CRP-REQ8:	Even if the WAN interface does not have an IPv6 GUA, the CPE Router MAY forward IPv6 traffic between its LAN interfaces.</t>
      <t>CRP-REQ9: The CPE Router SHOULD forward IPv6 traffic between its LAN interfaces if it has received a delegated prefix.</t>
      <t>SHP-REQ1:	The CPE Router SHOULD minimally assign a unique /64 from its received IA_PD to each of its LAN interfaces.</t>
      <t>SHP-REQ2:	Unless the CPE Router is otherwise configured by an administrator, the RA SHOULD set:
        <list style="symbols">
          <t>the M bit to 0</t>
          <t>the O bit to 1</t>
          <t>a prefix advertisement for the /64 applied to the LAN interface with the A bit set to 1 and the L bit set to 1</t>
        </list></t>
      <t>SHP-REQ3:	The CPE Router SHOULD serve as a stateless DHCPv6 server.</t>
      <t>SHP-REQ4:	The CPE Router SHOULD pass the additional set of DHCPv6 options received from the DHCP client on its WAN interface from the  Service Provider to IPv6 Home Devices.</t>
      <t>SHP-REQ5: IPv6 CPE Router Router Advertisements MAY include the RDNSS option as specified in <xref target="RFC5006" />. In that case, the IPv6 CPE Router MUST set the O bit of the RA message to 0.</t>
      <t>SHP-REQ6: The IPv6 CPE Router SHOULD include information received in the DHCP Container Option for Server Configuration, if sent by the Service Provider during CPE Router WAN Interface provisioning..</t>
      <t>TF-REQ1: The CPE Router MUST support the Neighbor Discovery (ND) protocol, as described in <xref target="RFC4861" />, on each of its LAN and WAN interfaces. </t>
      <t>TF-REQ2: Consistent with <xref target="RFC4943" />, unless the L bit in the RA is set to 1, the CPE Router SHOULD assume that such devices are "not-on-link", so traffic for such devices SHOULD be forwarded to the default router.</t>
      <t>S-REQ1: The CPE Router SHOULD support <xref target="I-D.ietf-v6ops-cpe-simple-security" />.</t>
      <t>S-REQ2: The CPE Router MUST support ingress filtering in accordance with The CPE Router MUST support ingress filtering in accordance with <xref target="RFC2827" />(BCP 38)</t>
    </list>
  </t>
 </section>
 <section title="Optional Use Cases and Requirements">
  <section title="IPv6 Provisioning of IPv6 Home Devices using Stateful DHCPv6">
    <section title="Description">
      <t>The default provisioning mode for IPv6 Home Devices is to use SLAAC; however, in some cases, stateful provisioning may be required. In such cases, the CPE Router could also support stateful DHCPv6. It is preferable for the Service Provider to delegate a prefix to the CPE Router, rather than have the CPE Router relay DHCP messages to the Service Provider's provisioning infrastructure.</t>
    </section>
    <section title="Requirements">
      <t>The CPE Router MAY serve as a stateful DHCPv6 server. When configured to enable stateful DHCPv6, the CPE Router SHOULD generate Router Advertisements (RA) on its LAN Interfaces as per <xref target="RFC4862" />, setting the M bit to indicate DHCP.</t>
      <t>Per <xref target="RFC3315" />, the CPE Router SHOULD assign an IA_NA and pass values for the additional set of DHCPv6 options received from the Service Provider through the <xref target="I-D.ietf-dhc-container-opt" />Container Option or the DNS Recursive Name Server option as specified in <xref target="RFC3646" />, and may send values for additional options. The CPE router need not serve as a DHCPv6 Relay Agent.</t>
      <t>The CPE Router is not expected to implement:
        <list style="symbols">
          <t>Support for transmission of Reconfigure messages on the LAN Interface.</t>
          <t>Any relay agent functions.</t>
          <t>Any DHCP authentication mechanisms.</t>
          <t>The server unicast option.</t>
          <t>Processing for user class or vendor class options received from clients.</t>
        </list>
      </t>
    </section>
  </section>
</section>

<section title="Future Considerations">
  <t>This section presents additional use cases and associated requirements for an IPv6 CPE Router that should be given future consideration.</t>
  <section title="IPv6 Prefix Sub-delegation">
    <t>In advanced home networks, users may deploy multiple routers.  To support those users or those deployment scenarios, the IPv6 CPE Router should have a mechanism to sub-delegate an IA_PD received from the Service Provider. The exact mechanism is left for future consideration.</t>
  </section>
  <section title="Provide IPv6 Multicast">
    <t>IPv6 Multicast support will facilitate Service Provider delivery of live multimedia content to IPv6 Home Devices. CPE Router support for IPv6 Multicast should be considered in the future.</t>
  </section>
  <section title="Transition and Tunneling Mechanisms">
    <t>As networks transition from IPv4 to IPv6, transition mechanisms may be required to continue providing customers with Internet service.  In the future, the CPE Router may need to support some of these transition mechanisms, such as softwire [I-D.ietf-softwire-hs-framework-l2tpv2], Dual Stack Lite [I-D.ietf-softwire-dual-stack-lite], or NAT64.</t>
  </section>
  <section title="Provisioning Consistency Between DHCPv4 and DHCPv6">
    <t>In order to simplify DHCP provisioning for Service Providers, devices using DHCP should use the same client identifier, whether using DHCPv4 or DHCPv6.  Accordingly, a CPE Router that supports IPv4 should support [RFC 4361] Client Identifiers for DHCPv4. Since this draft does not discuss DHCPv4 provisioning, this requirement is left for future working group consideration.</t>
  </section>
  <section title="Offer Domain Name Service through an IPv6 CPE Router">
    <t>In an IPv6 environment, DNS will be an essential service for customers. The CPE Router should be able to provide DNS service to consumer devices, either through a DNS proxy, recursive resolvers, or some other option. The use cases for DNS support have not yet been defined, and should be considered in the future.</t>
  </section>
</section>

<section title="Security Considerations">
  <t>
  IPv6 CPE Router security considerations are addressed in [draft-ietf-v6ops-simple-security].
  </t>
</section>
<section title="IANA Considerations">
  <t>
  This document does not register any values in IANA registries.
  </t>
</section>
	<section title="Acknowledgements">
    <t>Thanks to the following people (in alphabetical order) for their guidance and feedback:</t>
    <t>Scott Beuker, Rex Bullinger, Alain Durand, Katsunori Fukuoka, Kevin Johns, Stephen Kramer, Victor Kuarsingh, Jean-Francois Mule, John Pomeroy, Matt Schmitt, Cor Zwart
    </t>
    <t>
      This draft is based in part on CableLabs' eRouter specification. The authors wish to acknowledge the additional contributors from the eRouter team:</t>
<vspace blankLines='1' />
    <t>Ben Bekele, Amol Bhagwat, Ralph Brown, Eduardo Cardona, Margo Dolas, Toerless Eckert, Doc Evans, Roger Fish, Michelle Kuska, Diego Mazzola, John McQueen, Harsh Parandekar, Michael Patrick, Saifur Rahman, Lakshmi Raman, Ryan Ross, Ron da Silva, Madhu Sudan, Dan Torbet, Greg White</t>
	</section>
</middle>


<back>
<references title="Normative References">

	&RFC2119;
	&RFC2710;
	&RFC2827;
	&RFC3315; 
	&RFC3633;
	&RFC3646;
	&RFC3736; 
	&RFC4075; 
	&RFC4242; 
	&RFC4291;
	 
	&RFC4861; 
	&RFC4862; 
	&RFC5006; 
	&I-D.ietf-v6ops-cpe-simple-security;
	&I-D.ietf-dhc-container-opt;
</references>
<references title="Informative References">
	&RFC4361;
	&RFC4943;	
	&I-D.ietf-softwire-hs-framework-l2tpv2; 
	&I-D.ietf-softwire-dual-stack-lite;

</references>
</back>


</rfc>




